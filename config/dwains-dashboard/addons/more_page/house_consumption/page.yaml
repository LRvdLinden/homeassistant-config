## Created by Dwains Community
## More-page add-on: House consumption
## Version: 1.0.0
## https://github.com/LRvdLinden

- type: custom:dwains-flexbox-card
  items_classes: 'col-xs-12 col-sm-6 col-md-6 col-lg-6'
  padding: true
  cards:
  - type: vertical-stack
    cards:
      - name: Verbruik
        styles:
          card:
            - padding: '2% 0px'
            - text-transform: uppercase
            - font-size: 125%
            - color: 'var(--dwains-theme-accent)'
            - border-radius: 0%
            - font-weight: 100
            - letter-spacing: 10px
            - --mdc-ripple-press-opacity: 0
            - cursor: initial
          name:
            - font-weight: 900
        type: 'custom:button-card'
      - type: "custom:power-usage-card-regex"
        title: " "
        unknownText: "Onbekend"
        filter: "^.*_current_consumption$"
      - type: entities
        entities:
          - entity: sensor.p1_meter_active_power_w
            name: Stroomverbruik P1 (actueel)
            secondary_info: last-changed
          - entity: sensor.pv_outputpower
            name: Zonnepanelen (actueel)
            secondary_info: last-changed
            icon: fas:solar-panel
          - entity: sensor.gas_hourly
            name: Gasverbruik (1h)
            icon: mdi:fire
            secondary_info: last-changed
          - entity: sensor.water_hourly_l
            name: Waterverbruik (1h)
            icon: fas:water
            secondary_info: last-changed
  - type: vertical-stack
    cards:
      - name: Overzicht
        styles:
          card:
            - padding: '2% 0px'
            - text-transform: uppercase
            - font-size: 125%
            - color: 'var(--dwains-theme-accent)'
            - border-radius: 0%
            - font-weight: 100
            - letter-spacing: 10px
            - --mdc-ripple-press-opacity: 0
            - cursor: initial
          name:
            - font-weight: 900
        type: 'custom:button-card'
      - type: 'custom:auto-entities'
        card:
          type: entities
          show_header_toggle: false
          state_color: false
        filter:
          include:
            - entity_id: sensor.total_calculated_consumption
            - type: section
            - entity_id: '*_current_consumption'
              sort:
                method: state
                reverse: true
                numeric: true
          exclude:
            - state: "< 1.81"

- name: 'Always-on apparaten'
  styles:
    card:
      - padding: '2% 0px'
      - text-transform: uppercase
      - color: 'var(--dwains-theme-accent)'
      - font-size: 125%
      - border-radius: 0%
      - font-weight: 100
      - letter-spacing: 10px
      - --mdc-ripple-press-opacity: 0
      - cursor: initial
    name:
      - font-weight: 900
  type: 'custom:button-card'

- type: custom:dwains-flexbox-card
  items_classes: 'col-xs-12 col-sm-6 col-sm-6 col-md-3'
  cards:
# Meterkast
      - cards:
          - name: Meterkast
            styles:
              card:
                - text-transform: uppercase
                - font-size: 125%
                - color: 'var(--dwains-theme-accent)'
                - border-radius: 0%
                - font-weight: 100
                - letter-spacing: 10px
                - --mdc-ripple-press-opacity: 0
                - cursor: initial
            type: 'custom:button-card'
          - cards:
              - entities:
                  - color: 'var(--dwains-theme-accent)'
                    entity: sensor.shelly_shplg_s_dbf489_current_consumption
                    name: Huidig energieverbruik (24h)
                font_size: 80
                hours_to_show: 24
                line_width: 2
                hour24: true
                points_per_hour: 2
                decimals: 0
                show:
                  animate: true
                  fill: true
                  icon: false
                  labels: false
                  name: false
                  graph: line
                  extrema: true
                  average: true
                theme: ios-dark-mode-blue-red
                type: 'custom:mini-graph-card'
              - aspect_ratio: 1/1.2
                color: 'rgb(150, 150, 150)'
                entity: switch.shelly_shplg_s_dbf489
                icon: 'mdi:fuse'
                name: Meterkast
                show_state: true
                size: 30%
                lock:
                  enabled: true
                  #enabled: '[[[ return entity.state === 'on'; ]]]'
                  duration: 10
                  unlock: hold
                  #exemptions:
                  #  - username: test
                state:
                  - color: var(--disabled-text-color)
                    value: 'off'
                  - color: 'var(--dwains-theme-accent)'
                    value: 'on'
                styles:
                  name:
                    - text-transform: uppercase
                    - font-size: 10px
                  state:
                    - text-transform: uppercase
                    - font-size: 15px
                    - font: bold
                type: 'custom:button-card'
            type: horizontal-stack
          - entities:
            - entity: sensor.meterkast_energy_daily
              name: Verbruik vandaag
            - entity: sensor.energy_meterkast_daily_eur
              name: Kosten vandaag
            - type: custom:fold-entity-row
              head:
                type: section
                label: Meer informatie
              entities:
                - entity: sensor.meterkast_energy_yesterday
                  name: Verbruik gisteren
                - entity: sensor.energy_meterkast_yesterday_eur
                  name: Kosten gisteren
                - entity: sensor.shelly_shplg_s_dbf489_current_consumption
                  name: Huidig energie verbruik
                  secondary_info: last-updated
                - entity: sensor.meterkast_amperage
                  name: Huidig stroomverbruik
                - entity: sensor.shelly_shplg_s_dbf489_rssi_level
                  name: Link kwaliteit
            type: entities
        type: vertical-stack
## Serverruimte
      - cards:
          - name: Servers
            styles:
              card:
                - text-transform: uppercase
                - font-size: 125%
                - color: 'var(--dwains-theme-accent)'
                - border-radius: 0%
                - font-weight: 100
                - letter-spacing: 10px
                - --mdc-ripple-press-opacity: 0
                - cursor: initial
            type: 'custom:button-card'
          - cards:
              - entities:
                  - color: 'var(--dwains-theme-accent)'
                    entity: sensor.shelly_shplg2_1_db6297_current_consumption
                    name: Huidig energieverbruik (24h)
                font_size: 80
                hours_to_show: 24
                line_width: 2
                hour24: true
                points_per_hour: 2
                decimals: 0
                show:
                  animate: true
                  fill: true
                  icon: false
                  labels: false
                  name: false
                  graph: line
                  extrema: true
                  average: true
                theme: ios-dark-mode-blue-red
                type: 'custom:mini-graph-card'
              - aspect_ratio: 1/1.2
                color: 'rgb(150, 150, 150)'
                entity: switch.shelly_shplg2_1_db6297
                icon: 'mdi:server'
                name: Servers
                show_state: true
                size: 30%
                lock:
                  enabled: true
                  #enabled: '[[[ return entity.state === 'on'; ]]]'
                  duration: 10
                  unlock: hold
                  #exemptions:
                  #  - username: test
                state:
                  - color: var(--disabled-text-color)
                    value: 'off'
                  - color: 'var(--dwains-theme-accent)'
                    value: 'on'
                styles:
                  name:
                    - text-transform: uppercase
                    - font-size: 10px
                  state:
                    - text-transform: uppercase
                    - font-size: 15px
                    - font: bold
                type: 'custom:button-card'
            type: horizontal-stack
          - entities:
            - entity: sensor.serverkast_energy_daily
              name: Verbruik vandaag
            - entity: sensor.energy_serverkast_daily_eur
              name: Kosten vandaag
            - type: custom:fold-entity-row
              head:
                type: section
                label: Meer informatie
              entities:
                - entity: sensor.serverkast_energy_yesterday
                  name: Verbruik gisteren
                - entity: sensor.energy_serverkast_yesterday_eur
                  name: Kosten gisteren
                - entity: sensor.shelly_shplg2_1_db6297_current_consumption
                  name: Huidig energie verbruik
                  secondary_info: last-updated
                - entity: sensor.serverkast_amperage
                  name: Huidig stroomverbruik
                - entity: sensor.shelly_shplg2_1_db6297_rssi_level
                  name: Link kwaliteit
            type: entities
        type: vertical-stack
## TV
      - cards:
          - name: TV
            styles:
              card:
                - text-transform: uppercase
                - font-size: 125%
                - color: 'var(--dwains-theme-accent)'
                - border-radius: 0%
                - font-weight: 100
                - letter-spacing: 10px
                - --mdc-ripple-press-opacity: 0
                - cursor: initial
            type: 'custom:button-card'
          - cards:
              - entities:
                  - color: 'var(--dwains-theme-accent)'
                    entity: sensor.shelly_shplg_s_dc43af_current_consumption
                    name: Huidig energieverbruik (24h)
                font_size: 80
                hours_to_show: 24
                line_width: 2
                hour24: true
                points_per_hour: 2
                decimals: 0
                show:
                  animate: true
                  fill: true
                  icon: false
                  labels: false
                  name: false
                  graph: line
                  extrema: true
                  average: true
                theme: ios-dark-mode-blue-red
                type: 'custom:mini-graph-card'
              - aspect_ratio: 1/1.2
                color: 'rgb(150, 150, 150)'
                entity: switch.shelly_shplg_s_dc43af
                icon: 'mdi:television'
                name: TV
                show_state: true
                size: 30%
                lock:
                  enabled: true
                  #enabled: '[[[ return entity.state === 'on'; ]]]'
                  duration: 10
                  unlock: hold
                  #exemptions:
                  #  - username: test
                state:
                  - color: var(--disabled-text-color)
                    value: 'off'
                    icon: mdi:television-off
                  - color: 'var(--dwains-theme-accent)'
                    value: 'on'
                styles:
                  name:
                    - text-transform: uppercase
                    - font-size: 10px
                  state:
                    - text-transform: uppercase
                    - font-size: 15px
                    - font: bold
                type: 'custom:button-card'
            type: horizontal-stack
          - entities:
            - entity: sensor.tv_energy_daily
              name: Verbruik vandaag
            - entity: sensor.energy_tv_daily_eur
              name: Kosten vandaag
            - type: custom:fold-entity-row
              head:
                type: section
                label: Meer informatie
              entities:
                - entity: sensor.tv_energy_yesterday
                  name: Verbruik gisteren
                - entity: sensor.energy_tv_yesterday_eur
                  name: Kosten gisteren
                - entity: sensor.shelly_shplg_s_dc43af_current_consumption
                  name: Huidig energie verbruik
                  secondary_info: last-updated
                - entity: sensor.tv_amperage
                  name: Huidig stroomverbruik
                - entity: sensor.shelly_shplg_s_dc43af_rssi_level
                  name: Link kwaliteit
            type: entities
        type: vertical-stack

- name: 'Witgoed'
  styles:
    card:
      - padding: '2% 0px'
      - text-transform: uppercase
      - color: 'var(--dwains-theme-accent)'
      - font-size: 125%
      - border-radius: 0%
      - font-weight: 100
      - letter-spacing: 10px
      - --mdc-ripple-press-opacity: 0
      - cursor: initial
    name:
      - font-weight: 900
  type: 'custom:button-card'

- type: custom:dwains-flexbox-card
  items_classes: 'col-xs-12 col-sm-6 col-sm-6 col-md-3'
  cards:
## Koelkast
      - cards:
          - name: Koelkast
            styles:
              card:
                - text-transform: uppercase
                - font-size: 125%
                - color: 'var(--dwains-theme-accent)'
                - border-radius: 0%
                - font-weight: 100
                - letter-spacing: 10px
                - --mdc-ripple-press-opacity: 0
                - cursor: initial
            type: 'custom:button-card'
          - cards:
              - entities:
                  - color: 'var(--dwains-theme-accent)'
                    entity: sensor.shelly_shplg_s_dbef2a_current_consumption
                    name: Huidig energieverbruik (24h)
                font_size: 80
                hours_to_show: 24
                line_width: 2
                hour24: true
                points_per_hour: 2
                decimals: 0
                show:
                  animate: true
                  fill: true
                  icon: false
                  labels: false
                  name: false
                  graph: line
                  extrema: true
                  average: true
                theme: ios-dark-mode-blue-red
                type: 'custom:mini-graph-card'
              - aspect_ratio: 1/1.2
                color: 'rgb(150, 150, 150)'
                entity: switch.shelly_shplg_s_dbef2a
                icon: 'mdi:fridge-outline'
                name: Koelkast
                show_state: true
                size: 30%
                lock:
                  enabled: true
                  #enabled: '[[[ return entity.state === 'on'; ]]]'
                  duration: 10
                  unlock: hold
                  #exemptions:
                  #  - username: test
                state:
                  - color: var(--disabled-text-color)
                    value: 'off'
                    icon: mdi:fridge-variant-off-outline
                  - color: 'var(--dwains-theme-accent)'
                    value: 'on'
                styles:
                  name:
                    - text-transform: uppercase
                    - font-size: 10px
                  state:
                    - text-transform: uppercase
                    - font-size: 15px
                    - font: bold
                type: 'custom:button-card'
            type: horizontal-stack
          - entities:
            - entity: sensor.koelkast_energy_daily
              name: Verbruik vandaag
            - entity: sensor.energy_koelkast_daily_eur
              name: Kosten vandaag
            - type: custom:fold-entity-row
              head:
                type: section
                label: Meer informatie
              entities:
                - entity: sensor.koelkast_energy_yesterday
                  name: Verbruik gisteren
                - entity: sensor.energy_koelkast_yesterday_eur
                  name: Kosten gisteren
                - entity: sensor.shelly_shplg_s_dbef2a_current_consumption
                  name: Huidig energie verbruik
                  secondary_info: last-updated
                - entity: sensor.koelkast_amperage
                  name: Huidig stroomverbruik
                - entity: sensor.shelly_shplg_s_dbef2a_rssi_level
                  name: Link kwaliteit
            type: entities
        type: vertical-stack
## Vaatwasser
      - cards:
          - name: Vaatwasser
            styles:
              card:
                - text-transform: uppercase
                - color: 'var(--dwains-theme-accent)'
                - font-size: 125%
                - border-radius: 0%
                - font-weight: 100
                - letter-spacing: 10px
                - --mdc-ripple-press-opacity: 0
                - cursor: initial
            type: 'custom:button-card'
          - cards:
              - entities:
                  - color: 'var(--dwains-theme-accent)'
                    entity: sensor.shelly_shplg2_1_2f547c_current_consumption
                    name: Huidig energieverbruik (24h)
                font_size: 80
                hours_to_show: 4
                line_width: 2
                hour24: true
                points_per_hour: 12
                decimals: 0
                show:
                  animate: true
                  fill: true
                  icon: false
                  labels: false
                  name: false
                  graph: line
                  extrema: true
                  average: true
                theme: ios-dark-mode-blue-red
                type: 'custom:mini-graph-card'
              - aspect_ratio: 1/1.2
                color: 'rgb(150, 150, 150)'
                entity: input_select.vaatwasser_status
                icon: 'mdi:dishwasher'
                name: Vaatwasser
                show_state: true
                size: 30%
                lock:
                  enabled: true
                  #enabled: '[[[ return entity.state === 'on'; ]]]'
                  duration: 10
                  unlock: hold
                  #exemptions:
                  #  - username: test
                state:
                  - color: var(--disabled-text-color)
                    value: 'Uit'
                    icon: mdi:dishwasher-off
                  - color: 'var(--dwains-theme-accent)'
                    value: 'Bezig'
                styles:
                  name:
                    - text-transform: uppercase
                    - font-size: 10px
                  state:
                    - text-transform: uppercase
                    - font-size: 15px
                    - font: bold
                type: 'custom:button-card'
            type: horizontal-stack
          - entities:
            - entity: sensor.vaatwasser_energy_daily
              name: Verbruik vandaag
            - entity: sensor.energy_vaatwasser_daily_eur
              name: Kosten vandaag
            - type: custom:fold-entity-row
              head:
                type: section
                label: Meer informatie
              entities:
                - entity: sensor.vaatwasser_energy_yesterday
                  name: Verbruik gisteren
                - entity: sensor.energy_vaatwasser_yesterday_eur
                  name: Kosten gisteren
                - entity: sensor.shelly_shplg2_1_2f547c_current_consumption
                  name: Huidig energie verbruik
                  secondary_info: last-updated
                - entity: sensor.vaatwasser_amperage
                  name: Huidig stroomverbruik
                - entity: sensor.shelly_shplg2_1_2f547c_rssi_level
                  name: Link kwaliteit
            type: entities
        type: vertical-stack
## Wasmachine
      - cards:
          - name: Wasmachine
            styles:
              card:
                - text-transform: uppercase
                - font-size: 125%
                - color: 'var(--dwains-theme-accent)'
                - border-radius: 0%
                - font-weight: 100
                - letter-spacing: 10px
                - --mdc-ripple-press-opacity: 0
                - cursor: initial
            type: 'custom:button-card'
          - cards:
              - entities:
                  - color: 'var(--dwains-theme-accent)'
                    entity: sensor.shelly_shplg2_1_6cc217_current_consumption
                    name: Huidig energieverbruik (24h)
                font_size: 80
                hours_to_show: 4
                line_width: 2
                hour24: true
                points_per_hour: 12
                decimals: 0
                show:
                  animate: true
                  fill: true
                  icon: false
                  labels: false
                  name: false
                  graph: line
                  extrema: true
                  average: true
                theme: ios-dark-mode-blue-red
                type: 'custom:mini-graph-card'
              - aspect_ratio: 1/1.2
                color: 'rgb(150, 150, 150)'
                entity: input_select.wasmachine_status
                icon: 'mdi:washing-machine'
                name: Wasmachine
                show_state: true
                size: 30%
                lock:
                  enabled: true
                  #enabled: '[[[ return entity.state === 'on'; ]]]'
                  duration: 10
                  unlock: hold
                  #exemptions:
                  #  - username: test
                state:
                  - color: var(--disabled-text-color)
                    value: 'Uit'
                    icon: mdi:washing-machine-off
                  - color: 'var(--dwains-theme-accent)'
                    value: 'Bezig'
                styles:
                  name:
                    - text-transform: uppercase
                    - font-size: 10px
                  state:
                    - text-transform: uppercase
                    - font-size: 15px
                    - font: bold
                type: 'custom:button-card'
            type: horizontal-stack
          - entities:
            - entity: sensor.wasmachine_energy_daily
              name: Verbruik vandaag
            - entity: sensor.energy_wasmachine_daily_eur
              name: Kosten vandaag
            - type: custom:fold-entity-row
              head:
                type: section
                label: Meer informatie
              entities:
                - entity: sensor.wasmachine_energy_yesterday
                  name: Verbruik gisteren
                - entity: sensor.energy_wasmachine_yesterday_eur
                  name: Kosten gisteren
                - entity: sensor.shelly_shplg2_1_6cc217_current_consumption
                  name: Huidig energie verbruik
                  secondary_info: last-updated
                - entity: sensor.wasmachine_amperage
                  name: Huidig stroomverbruik
                - entity: sensor.shelly_shplg2_1_6cc217_rssi_level
                  name: Link kwaliteit
            type: entities
        type: vertical-stack
## Wasdroger
      - cards:
          - name: Wasdroger
            styles:
              card:
                - text-transform: uppercase
                - font-size: 125%
                - color: 'var(--dwains-theme-accent)'
                - border-radius: 0%
                - font-weight: 100
                - letter-spacing: 10px
                - --mdc-ripple-press-opacity: 0
                - cursor: initial
            type: 'custom:button-card'
          - cards:
              - entities:
                  - color: 'var(--dwains-theme-accent)'
                    entity: sensor.shelly_shplg2_1_6cc06f_current_consumption
                    name: Huidig energieverbruik (24h)
                font_size: 80
                hours_to_show: 4
                line_width: 2
                hour24: true
                points_per_hour: 12
                decimals: 0
                show:
                  animate: true
                  fill: true
                  icon: false
                  labels: false
                  name: false
                  graph: line
                  extrema: true
                  average: true
                theme: ios-dark-mode-blue-red
                type: 'custom:mini-graph-card'
              - aspect_ratio: 1/1.2
                color: 'rgb(150, 150, 150)'
                entity: input_select.wasdroger_status
                icon: 'mdi:tumble-dryer'
                name: wasdroger
                show_state: true
                size: 30%
                lock:
                  enabled: true
                  #enabled: '[[[ return entity.state === 'on'; ]]]'
                  duration: 10
                  unlock: hold
                  #exemptions:
                  #  - username: test
                state:
                  - color: var(--disabled-text-color)
                    value: 'Uit'
                    icon: mdi:tumble-dryer-off
                  - color: 'var(--dwains-theme-accent)'
                    value: 'Bezig'
                styles:
                  name:
                    - text-transform: uppercase
                    - font-size: 10px
                  state:
                    - text-transform: uppercase
                    - font-size: 15px
                    - font: bold
                type: 'custom:button-card'
            type: horizontal-stack
          - entities:
            - entity: sensor.wasdroger_energy_daily
              name: Verbruik vandaag
            - entity: sensor.energy_wasdroger_daily_eur
              name: Kosten vandaag
            - type: custom:fold-entity-row
              head:
                type: section
                label: Meer informatie
              entities:
                - entity: sensor.wasdroger_energy_yesterday
                  name: Verbruik gisteren
                - entity: sensor.energy_wasdroger_yesterday_eur
                  name: Kosten gisteren
                - entity: sensor.shelly_shplg2_1_6cc06f_current_consumption
                  name: Huidig energie verbruik
                  secondary_info: last-updated
                - entity: sensor.wasdroger_amperage
                  name: Huidig stroomverbruik
                - entity: sensor.shelly_shplg2_1_6cc06f_rssi_level
                  name: Link kwaliteit
            type: entities
        type: vertical-stack

- name: 'Woningvoorzieningen'
  styles:
    card:
      - padding: '2% 0px'
      - text-transform: uppercase
      - color: 'var(--dwains-theme-accent)'
      - font-size: 125%
      - border-radius: 0%
      - font-weight: 100
      - letter-spacing: 10px
      - --mdc-ripple-press-opacity: 0
      - cursor: initial
    name:
      - font-weight: 900
  type: 'custom:button-card'

- type: custom:dwains-flexbox-card
  items_classes: 'col-xs-12 col-sm-6 col-sm-6 col-md-3'
  cards:
## Quooker
      - cards:
          - name: Quooker
            styles:
              card:
                - text-transform: uppercase
                - color: 'var(--dwains-theme-accent)'
                - font-size: 125%
                - border-radius: 0%
                - font-weight: 100
                - letter-spacing: 10px
                - --mdc-ripple-press-opacity: 0
                - cursor: initial
            type: 'custom:button-card'
          - cards:
              - entities:
                  - color: 'var(--dwains-theme-accent)'
                    entity: sensor.shelly_shplg2_1_2f546e_current_consumption
                    name: Huidig energieverbruik (24h)
                font_size: 80
                hours_to_show: 24
                line_width: 2
                hour24: true
                points_per_hour: 2
                decimals: 0
                show:
                  animate: true
                  fill: true
                  icon: false
                  labels: false
                  name: false
                  graph: line
                  extrema: true
                  average: true
                theme: ios-dark-mode-blue-red
                type: 'custom:mini-graph-card'
              - aspect_ratio: 1/1.2
                color: 'rgb(150, 150, 150)'
                entity: switch.shelly_shplg2_1_2f546e
                icon: 'mdi:water-pump'
                name: Quooker
                show_state: true
                size: 30%
                lock:
                  enabled: true
                  #enabled: '[[[ return entity.state === 'on'; ]]]'
                  duration: 10
                  unlock: hold
                  #exemptions:
                  #  - username: test
                state:
                  - color: var(--disabled-text-color)
                    value: 'off'
                    icon: mdi:water-pump-off
                  - color: 'var(--dwains-theme-accent)'
                    value: 'on'
                styles:
                  name:
                    - text-transform: uppercase
                    - font-size: 10px
                  state:
                    - text-transform: uppercase
                    - font-size: 15px
                    - font: bold
                type: 'custom:button-card'
            type: horizontal-stack
          - entities:
            - entity: sensor.quooker_energy_daily
              name: Verbruik vandaag
            - entity: sensor.energy_quooker_daily_eur
              name: Kosten vandaag
            - type: custom:fold-entity-row
              head:
                type: section
                label: Meer informatie
              entities:
                - entity: sensor.quooker_energy_yesterday
                  name: Verbruik gisteren
                - entity: sensor.energy_quooker_yesterday_eur
                  name: Kosten gisteren
                - entity: sensor.shelly_shplg2_1_2f546e_current_consumption
                  name: Huidig energie verbruik
                  secondary_info: last-updated
                - entity: sensor.quooker_amperage
                  name: Huidig stroomverbruik
                - entity: sensor.shelly_shplg2_1_2f546e_rssi_level
                  name: Link kwaliteit
          #    show_header_toggle: false
            type: entities
        type: vertical-stack

## CV
      - cards:
          - name: CV
            styles:
              card:
                - text-transform: uppercase
                - font-size: 125%
                - color: 'var(--dwains-theme-accent)'
                - border-radius: 0%
                - font-weight: 100
                - letter-spacing: 10px
                - --mdc-ripple-press-opacity: 0
                - cursor: initial
            type: 'custom:button-card'
          - cards:
              - entities:
                  - color: 'var(--dwains-theme-accent)'
                    entity: sensor.shelly_shplg_s_80116b_current_consumption
                    name: Huidig energieverbruik (24h)
                font_size: 80
                hours_to_show: 24
                line_width: 2
                hour24: true
                points_per_hour: 2
                decimals: 0
                show:
                  animate: true
                  fill: true
                  icon: false
                  labels: false
                  name: false
                  graph: line
                  extrema: true
                  average: true
                theme: ios-dark-mode-blue-red
                type: 'custom:mini-graph-card'
              - aspect_ratio: 1/1.2
                color: 'rgb(150, 150, 150)'
                entity: switch.shelly_shplg_s_80116b
                icon: 'mdi:radiator'
                name: CV
                show_state: true
                size: 30%
                lock:
                  enabled: true
                  #enabled: '[[[ return entity.state === 'on'; ]]]'
                  duration: 10
                  unlock: hold
                  #exemptions:
                  #  - username: test
                state:
                  - color: var(--disabled-text-color)
                    value: 'off'
                  - color: 'var(--dwains-theme-accent)'
                    value: 'on'
                styles:
                  name:
                    - text-transform: uppercase
                    - font-size: 10px
                  state:
                    - text-transform: uppercase
                    - font-size: 15px
                    - font: bold
                type: 'custom:button-card'
            type: horizontal-stack
          - entities:
            - entity: sensor.cv_energy_daily
              name: Verbruik vandaag
            - entity: sensor.energy_cv_daily_eur
              name: Kosten vandaag
            - type: custom:fold-entity-row
              head:
                type: section
                label: Meer informatie
              entities:
                - entity: sensor.cv_energy_yesterday
                  name: Verbruik gisteren
                - entity: sensor.energy_cv_yesterday_eur
                  name: Kosten gisteren
                - entity: sensor.shelly_shplg_s_80116b_current_consumption
                  name: Huidig energie verbruik
                  secondary_info: last-updated
                - entity: sensor.cv_amperage
                  name: Huidig stroomverbruik
                - entity: sensor.shelly_shplg_s_80116b_rssi_level
                  name: Link kwaliteit
            type: entities
        type: vertical-stack
## WTW
      - cards:
          - name: WTW
            styles:
              card:
                - text-transform: uppercase
                - font-size: 125%
                - color: 'var(--dwains-theme-accent)'
                - border-radius: 0%
                - font-weight: 100
                - letter-spacing: 10px
                - --mdc-ripple-press-opacity: 0
                - cursor: initial
            type: 'custom:button-card'
          - cards:
            - entities:
                - color: 'var(--dwains-theme-accent)'
                  entity: sensor.shelly_shplg_s_801486_current_consumption
                  name: Huidig energieverbruik (24h)
              font_size: 80
              hours_to_show: 24
              line_width: 2
              hour24: true
              points_per_hour: 2
              decimals: 0
              show:
                animate: true
                fill: true
                icon: false
                labels: false
                name: false
                graph: line
                extrema: true
                average: true
              theme: ios-dark-mode-blue-red
              type: 'custom:mini-graph-card'
            - aspect_ratio: 1/1.2
              color: 'rgb(150, 150, 150)'
              entity: switch.shelly_shplg_s_801486
              icon: 'mdi:hvac'
              name: WTW
              show_state: true
              size: 30%
              lock:
                  enabled: true
                  #enabled: '[[[ return entity.state === 'on'; ]]]'
                  duration: 10
                  unlock: hold
                  #exemptions:
                  #  - username: test
              state:
                - color: var(--disabled-text-color)
                  value: 'off'
                - color: 'var(--dwains-theme-accent)'
                  value: 'on'
              styles:
                name:
                  - text-transform: uppercase
                  - font-size: 10px
                state:
                  - text-transform: uppercase
                  - font-size: 15px
                  - font: bold
              type: 'custom:button-card'
            type: horizontal-stack
          - entities:
            - entity: sensor.wtw_energy_daily
              name: Verbruik vandaag
            - entity: sensor.energy_wtw_daily_eur
              name: Kosten vandaag
            - type: custom:fold-entity-row
              head:
                type: section
                label: Meer informatie
              entities:
                - entity: sensor.wtw_energy_yesterday
                  name: Verbruik gisteren
                - entity: sensor.energy_wtw_yesterday_eur
                  name: Kosten gisteren
                - entity: sensor.shelly_shplg_s_801486_current_consumption
                  name: Huidig energie verbruik
                  secondary_info: last-updated
                - entity: sensor.wtw_amperage
                  name: Huidig stroomverbruik
                - entity: sensor.shelly_shplg_s_801486_rssi_level
                  name: Link kwaliteit
            type: entities
        type: vertical-stack


- name: 'Nutsvoorzieningen'
  styles:
    card:
      - padding: '2% 0px'
      - text-transform: uppercase
      - color: 'var(--dwains-theme-accent)'
      - font-size: 125%
      - border-radius: 0%
      - font-weight: 100
      - letter-spacing: 10px
      - --mdc-ripple-press-opacity: 0
      - cursor: initial
    name:
      - font-weight: 900
  type: 'custom:button-card'

- type: custom:dwains-flexbox-card
  items_classes: 'col-xs-12 col-sm-6 col-sm-6 col-md-3'
  cards:
## Stroom
      - cards:
          - name: Stroom
            styles:
              card:
                - text-transform: uppercase
                - font-size: 125%
                - color: 'var(--dwains-theme-accent)'
                - border-radius: 0%
                - font-weight: 100
                - letter-spacing: 10px
                - --mdc-ripple-press-opacity: 0
                - cursor: initial
            type: 'custom:button-card'
          - align_state: left
            animate: true
            entities:
              - entity: sensor.p1_meter_active_power_w
                name: Import
              - entity: sensor.pv_outputpower
                name: Export
                y_axis: secondary
            font_size: 80
            hours_to_show: 24
            hour24: true
            points_per_hour: 4
            decimals: 0
            line_width: 2
            line_color: 'var(--dwains-theme-accent)'
            name: Actuele energieverbruik (24h)
            show:
              graph: line
              icon: false
              name: false
              state: true
              extrema: true
              average: false
            type: 'custom:mini-graph-card'
          - entities:
            - entity: sensor.pv_outputpower
              icon: fas:solar-panel
              name: Energy (Solar)
            - entity: sensor.p1_meter_active_power_w
              icon: fas:bolt
              name: Energy (Total)
            - type: custom:fold-entity-row
              head:
                type: section
                label: 'Meer informatie'
              entities:
                - entity: sensor.p1_meter_active_power_l1_w
                  icon: fas:bolt
                  name: Energy (L1)
                - entity: sensor.p1_meter_active_power_l2_w
                  icon: fas:bolt
                  name: Energy (L2)
                - entity: sensor.p1_meter_active_power_l3_w
                  icon: fas:bolt
                  name: Energy (L3)
            show_header_toggle: false
            title: null
            type: entities
          - align_state: left
            animate: true
            entities:
              - entity: sensor.energy_short_daily
                name: Stroomverbruik per dag
              - entity: sensor.pv_daily
                name: Zonnepanelen per dag
            font_size: 80
            hours_to_show: 336
            hour24: true
            #points_per_hour: 0.5
            aggregate_func: max
            group_by: date
            name: 'Verbruik per dag (14 dagen)'
            decimals: 2
            line_width: 2
            line_color: 'var(--dwains-theme-accent)'
            show:
              graph: bar
              icon: false
              name: true
              extrema: false
              average: false
              state: false
            type: 'custom:mini-graph-card'
          - entities:
            - entity: sensor.average_energy_day
              icon: 'mdi:home-analytics'
              name: Gemiddeld
            - type: divider
            - entity: sensor.energy_short_daily
              icon: 'mdi:flash'
              name: Vandaag
            - entity: sensor.pv_daily
              icon: fas:solar-panel
              name: Vandaag
            - entity: sensor.energy_price_today
              icon: 'mdi:currency-eur'
              name: Vandaag
            - type: custom:fold-entity-row
              head:
                type: section
                label: Meer informatie
              entities:
              - entity: sensor.energy_short_yesterday
                icon: 'mdi:flash'
                name: Gisteren
              - entity: sensor.pv_yesterday
                icon: fas:solar-panel
                name: Gisteren
              - entity: sensor.energy_price_yesterday
                icon: 'mdi:currency-eur'
                name: Gisteren
              - type: divider
              - entity: sensor.energy_short_weekly
                icon: 'mdi:flash'
                name: Deze Week
              - entity: sensor.pv_weekly
                icon: fas:solar-panel
                name: Deze week
              - entity: sensor.energy_price_week
                icon: 'mdi:currency-eur'
                name: Deze Week
              - type: divider
              - entity: sensor.energy_short_last_week
                icon: 'mdi:flash'
                name: Vorige Week
              - entity: sensor.pv_last_week
                icon: fas:solar-panel
                name: Vorige Week
              - entity: sensor.energy_price_last_week
                icon: 'mdi:currency-eur'
                name: Vorige Week
              - type: divider
              - entity: sensor.energy_short_monthly
                icon: 'mdi:flash'
                name: Deze Maand
              - entity: sensor.pv_monthly
                icon: fas:solar-panel
                name: Deze Maand
              - entity: sensor.energy_price_month
                icon: 'mdi:currency-eur'
                name: Deze Maand
              - type: divider
              - entity: sensor.energy_short_last_month
                icon: 'mdi:flash'
                name: Vorige Maand
              - entity: sensor.pv_last_month
                icon: fas:solar-panel
                name: Vorige Maand
              - entity: sensor.energy_price_last_month
                icon: 'mdi:currency-eur'
                name: Vorige Maand
              - type: divider
              - entity: sensor.energy_short_yearly
                icon: 'mdi:flash'
                name: Dit Jaar
              - entity: sensor.pv_yearly
                icon: fas:solar-panel
                name: Dit Jaar
              - entity: sensor.energy_price_year
                icon: 'mdi:currency-eur'
                name: Dit Jaar
            show_header_toggle: false
            title: Verbruik
            type: entities
          - entities:
            - type: custom:fold-entity-row
              head:
                type: section
                label: Import
              entities:
              - entity:  sensor.p1_meter_total_power_import_t2_kwh
                name: Normaal
              - entity:  sensor.p1_meter_total_power_import_t1_kwh
                name: Dal
            - type: custom:fold-entity-row
              head:
                type: section
                label: Export
              entities:
              - entity:  sensor.p1_meter_total_power_export_t2_kwh
                name: Normaal
              - entity:  sensor.p1_meter_total_power_export_t1_kwh
                name: Dal
            show_header_toggle: false
            title: Meterstanden
            type: entities
          - entities:
            - type: custom:fold-entity-row
              head:
                type: section
                label: Variabele kosten
              entities:
                - entity: input_number.all_in_dubbeltarief_stroom_hoog
                  icon: 'mdi:flash'
                  name: Normaaltarief per kWh
                - entity: input_number.all_in_dubbeltarief_stroom_laag
                  icon: 'mdi:flash'
                  name: Daltarief per kWh
                - type: divider
                - entity: input_number.teruglevering_dubbeltarief_stoom_hoog
                  icon: 'mdi:flash'
                  name: Normaalterugleverings tarief per kWh
                - entity: input_number.teruglevering_dubbeltarief_stoom_laag
                  icon: 'mdi:flash'
                  name: Dalterugleverings tarief per kWh
            - type: custom:fold-entity-row
              head:
                type: section
                label: Vaste kosten
              entities:
                - entity: input_number.vaste_leveringskosten_stroom
                  icon: 'mdi:flash'
                  name: Vaste leveringskosten per dag
                - entity: input_number.vermindering_energiebelasting_stroom
                  icon: 'mdi:flash'
                  name: Vermindering energiebelasting per jaar
                - entity: input_number.netbeheerkosten_stroom
                  icon: 'mdi:flash'
                  name: Vaste netbeheerkosten per jaar
            show_header_toggle: false
            title: Energieprijzen
            type: entities
        type: vertical-stack
## gas
      - cards:
          - name: Gas
            styles:
              card:
                - text-transform: uppercase
                - font-size: 125%
                - color: 'var(--dwains-theme-accent)'
                - border-radius: 0%
                - font-weight: 100
                - letter-spacing: 10px
                - --mdc-ripple-press-opacity: 0
                - cursor: initial
            type: 'custom:button-card'
          - align_state: left
            animate: true
            entities:
              - entity: sensor.gas_hourly
                name: Gasverbruik per uur
            font_size: 80
            hours_to_show: 24
            hour24: true
            points_per_hour: 2
            decimals: 2
            line_width: 2
            line_color: 'var(--dwains-theme-accent)'
            show:
              graph: bar
              icon: false
              name: false
              extrema: true
              average: true
            type: 'custom:mini-graph-card'
          - entities:
              - entity: sensor.gas_hourly
                icon: fas:burn
                name: Gas
            show_header_toggle: false
            title: null
            type: entities
          - align_state: left
            animate: true
            entities:
              - entity: sensor.gas_daily
                name: Gasverbruik per dag
            font_size: 80
            hours_to_show: 336
            hour24: true
            #points_per_hour: 0.5
            aggregate_func: max
            group_by: date
            name: 'Verbruik per dag (14 dagen)'
            decimals: 2
            line_width: 2
            line_color: 'var(--dwains-theme-accent)'
            show:
              graph: bar
              icon: false
              name: true
              extrema: false
              average: false
              state: false
            type: 'custom:mini-graph-card'
          - entities:
              - entity: sensor.average_gas_day
                icon: 'mdi:home-analytics'
                name: Gemiddeld
              - type: divider
              - entity: sensor.gas_daily
                icon: 'mdi:fire'
                name: Vandaag
              - entity: sensor.gas_price_today
                icon: 'mdi:currency-eur'
                name: Vandaag
              - type: divider
              - entity: sensor.gas_yesterday
                icon: 'mdi:fire'
                name: Gisteren
              - entity: sensor.gas_price_yesterday
                icon: 'mdi:currency-eur'
                name: Gisteren
              - type: custom:fold-entity-row
                head:
                  type: section
                  label: Meer informatie
                entities:
                  - entity: sensor.gas_weekly
                    icon: 'mdi:fire'
                    name: Deze Week
                  - entity: sensor.gas_price_week
                    icon: 'mdi:currency-eur'
                    name: Deze Week
                  - type: divider
                  - entity: sensor.gas_last_week
                    icon: 'mdi:fire'
                    name: Vorige Week
                  - entity: sensor.gas_price_last_week
                    icon: 'mdi:currency-eur'
                    name: Vorige Week
                  - type: divider
                  - entity: sensor.gas_monthly
                    icon: 'mdi:fire'
                    name: Deze Maand
                  - entity: sensor.gas_price_month
                    icon: 'mdi:currency-eur'
                    name: Deze Maand
                  - type: divider
                  - entity: sensor.gas_last_month
                    icon: 'mdi:fire'
                    name: Vorige Maand
                  - entity: sensor.gas_price_last_month
                    icon: 'mdi:currency-eur'
                    name: Vorige Maand
                  - type: divider
                  - entity: sensor.gas_yearly
                    icon: 'mdi:fire'
                    name: Dit Jaar
                  - entity: sensor.gas_price_year
                    icon: 'mdi:currency-eur'
                    name: Dit Jaar
            show_header_toggle: false
            title: Verbruik
            type: entities
          - entities:
              - entity: sensor.p1_meter_total_gas_m3
                name: Gas
            show_header_toggle: false
            title: Meterstand
            type: entities
          - entities:
            - type: custom:fold-entity-row
              head:
                type: section
                label: Variabele kosten
              entities:
                - entity: input_number.all_in_enkeltarief_gas
                  icon: 'mdi:fire'
                  name: Tarief per m3
            - type: custom:fold-entity-row
              head:
                type: section
                label: Vaste kosten
              entities:
                - entity: input_number.vaste_leveringskosten_gas
                  icon: 'mdi:fire'
                  name: Vaste leveringskosten per dag
                - entity: input_number.netbeheerkosten_gas
                  icon: 'mdi:fire'
                  name: Netbeheerkosten per jaar
            show_header_toggle: false
            title: Energieprijzen
            type: entities
        type: vertical-stack
## water
      - cards:
          - name: Water
            styles:
              card:
                - text-transform: uppercase
                - font-size: 125%
                - color: 'var(--dwains-theme-accent)'
                - border-radius: 0%
                - font-weight: 100
                - letter-spacing: 10px
                - --mdc-ripple-press-opacity: 0
                - cursor: initial
            type: 'custom:button-card'
          - align_state: left
            animate: true
            entities:
              - entity: sensor.water_hourly
                name: Waterverbruik per uur
            font_size: 80
            hours_to_show: 24
            hour24: true
            points_per_hour: 2
            decimals: 2
            line_width: 2
            line_color: 'var(--dwains-theme-accent)'
            show:
              graph: bar
              icon: false
              name: false
              extrema: true
              average: true
            type: 'custom:mini-graph-card'
          - entities:
              - entity: sensor.water_hourly
                icon: fas:water
                name: Water
            show_header_toggle: false
            title: null
            type: entities
          - align_state: left
            animate: true
            entities:
              - entity: sensor.water_daily
                name: Waterverbruik per dag
            font_size: 80
            hours_to_show: 336
            hour24: true
            #points_per_hour: 0.5
            aggregate_func: max
            group_by: date
            name: 'Verbruik per dag (14 dagen)'
            decimals: 2
            line_width: 2
            line_color: 'var(--dwains-theme-accent)'
            show:
              graph: bar
              icon: false
              name: true
              extrema: false
              average: false
              state: false
            type: 'custom:mini-graph-card'
          - entities:
              - entity: sensor.average_water_day
                icon: 'mdi:home-analytics'
                name: Gemiddeld
              - type: divider
              - entity: sensor.water_daily
                icon: 'mdi:water'
                name: Vandaag
              - entity: sensor.water_price_today
                icon: 'mdi:currency-eur'
                name: Vandaag
              - type: divider
              - entity: sensor.water_yesterday
                icon: 'mdi:water'
                name: Gisteren
              - entity: sensor.water_price_yesterday
                icon: 'mdi:currency-eur'
                name: Gisteren
              - type: custom:fold-entity-row
                head:
                  type: section
                  label: Meer informatie
                entities:
                  - entity: sensor.water_weekly
                    icon: 'mdi:water'
                    name: Deze Week
                  - entity: sensor.water_price_week
                    icon: 'mdi:currency-eur'
                    name: Deze Week
                  - type: divider
                  - entity: sensor.water_last_week
                    icon: 'mdi:water'
                    name: Vorige Week
                  - entity: sensor.water_price_last_week
                    icon: 'mdi:currency-eur'
                    name: Vorige Week
                  - type: divider
                  - entity: sensor.water_monthly
                    icon: 'mdi:water'
                    name: Deze Maand
                  - entity: sensor.water_price_month
                    icon: 'mdi:currency-eur'
                    name: Deze Maand
                  - type: divider
                  - entity: sensor.water_last_month
                    icon: 'mdi:water'
                    name: Vorige Maand
                  - entity: sensor.water_price_last_month
                    icon: 'mdi:currency-eur'
                    name: Vorige Maand
                  - type: divider
                  - entity: sensor.water_yearly
                    icon: 'mdi:water'
                    name: Dit Jaar
                  - entity: sensor.water_price_year
                    icon: 'mdi:currency-eur'
                    name: Dit Jaar
            show_header_toggle: false
            title: Verbruik
            type: entities
          - entities:
            - type: custom:fold-entity-row
              head:
                type: section
                label: Variabele kosten
              entities:
                - entity: input_number.water_energy_cost
                  icon: 'mdi:water'
                  name: Tarief per m3
                - entity: input_number.water_belasting_cost
                  icon: 'mdi:water'
                  name: Belastingtarief per m3
            - type: custom:fold-entity-row
              head:
                type: section
                label: Vaste kosten
              entities:
                - entity: input_number.vaste_leveringskosten_water
                  icon: 'mdi:fire'
                  name: Vaste leveringskosten per dag
            show_header_toggle: false
            title: Energieprijzen
            type: entities
        type: vertical-stack
